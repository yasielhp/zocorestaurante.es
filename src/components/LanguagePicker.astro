---
import { languages } from '@/i18n/ui';
import {
  getLangFromUrl,
  getRouteFromUrl,
  useTranslatedPath,
} from '@/i18n/utils';

const route = getRouteFromUrl(Astro.url);
const currentLang = getLangFromUrl(Astro.url);
---

<ul class="flex border-3 border-warm-gold uppercase rounded-[8px]">
  {
    Object.entries(languages).map(([lang, label]) => {
      const translatePath = useTranslatedPath(lang as keyof typeof languages);
      const isCurrentLang = lang === currentLang;
      return (
        <li>
          <a
            href={translatePath(`/${route ? route : ''}`)}
            class={`px-1.5 py-1 font-bold border-0 transition-colors ${
              isCurrentLang
                ? 'text-white bg-warm-gold hover:text-white/80 rounded-[8px]'
                : 'text-warm-gold hover:text-warm-gold/80'
            }`}
            aria-current={isCurrentLang ? 'page' : undefined}
          >
            {label}
          </a>
        </li>
      );
    })
  }
</ul>
